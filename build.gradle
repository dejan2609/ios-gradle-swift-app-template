buildscript {
    repositories {
        maven { url 'https://plugins.gradle.org/m2/' } // Mirrors jcenter() and mavenCentral()
        maven { url 'http://repository.openbakery.org/' }
    }

    dependencies {
        // iOS gradle plugin
        classpath 'org.openbakery:xcode-plugin:0.13.0'
        // Code Coverage
        classpath 'org.kt3k.gradle.plugin:coveralls-gradle-plugin:2.6.3'
        // Check for plugin updates
        classpath 'com.github.ben-manes:gradle-versions-plugin:0.12.0'
    }
}

apply plugin: 'org.openbakery.xcode-plugin'
apply plugin: 'com.github.kt3k.coveralls'
apply plugin: 'com.github.ben-manes.versions'

xcodebuild {
    target 'ios-gradle-swift-template'
    scheme 'ios-gradle-swift-template'

    configuration 'Debug'

    destination {
        platform = 'iOS Simulator'
        name = 'iPhone 6s'
        os = '9.0'
    }

    coverage {
        outputFormat 'xml'
        exclude '.*h$|.*UnitTests.*m$'
    }
}

coveralls {
    coberturaReportPath './build/coverage/cobertura.xml'
}

